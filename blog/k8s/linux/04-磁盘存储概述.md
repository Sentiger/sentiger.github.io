---
title: 磁盘存储概述
order: 4
category:
  - linux
tag:
  - linux
---

**参考资料**

1. [理解node]

## 磁盘

磁盘可以存储内容，一个磁盘有N个磁盘，每个磁盘有两个盘面，盘面又可以分成磁道，磁道又可以组成柱面。

数据内容就是存储到磁道中，存储的单位就是分为一个个的扇区，每个扇区大小就是磁盘IO的最小单位。

分区：就是将整块磁盘分为不同大小的区块，每个区块有开始未位置和结束为止。一般读写速度，分区以柱面为单位分的，这样可以减少磁头的移动

## 文件系统

文件系统是操作系统来管理操作磁盘的一套接口实现。再上次就提供的是虚拟文件系统，这个是用来提供给用户系统调用的。而文件系统为了读取速度不是以扇区为单位，而是再抽象出来一层block,默认是4k。

## 文件存储

1. 新建一个空文件需要消耗掉一个inode，用来保存用户、创建时间等元数据。
2. 新建一个空文件还需要消耗掉其所在目录的block中一定的空间，这些空间用来保存文件名，inode号等信息。
3. 目录类似一个map，用来存储文件名称和文件的inode号。
4. 目录存储文件：文件名：inode号

## 链接

- 软链接会新建一个文件，然后内容指向原文件名，会消耗inode
- 硬链接是在目录中新增一个目录项，指向的是同一个文件inode。不会消耗inode


[理解node]: https://www.ruanyifeng.com/blog/2011/12/inode.html