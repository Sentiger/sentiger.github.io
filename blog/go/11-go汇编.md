---
title: go汇编
order: 11
date: 2022-12-15
category:
  - linux
  - go汇编
---

## go汇编总结

[参考文章1]

### 函数如何获取参数和返回值

`go`中存在一个伪寄存器`FP`，这个里面存储的是运行到本函数中`第1`个参数的位置，所以在写go汇编的时候通过这个就可以了找到参数，返回值。

**注意：**

下面代码中是go中的汇编，而不是架构中的汇编，`FP`也是个伪寄存器，如果使用go反汇编的时候，是没有`FP`的

```go

func add(a,b,c int64) (x,y,z int64)

第一个参数：a,0(FP)
第二个参数：b,8(FP)
第三个参数：c,16(FP)

第一个返回值: x,24(FP)
第二个返回值: y,32(FP)
第三个返回值: z,40(FP)

```

**总结**

函数调用入栈顺序：

局部变量->返回值(倒叙)->函数参数(倒叙)


**当前函数局部变量获取**

```go
伪寄存器SP 表示当前函数局部第一个变量结束位置，也是BP寄存器位置
表示第一个局部变量：a,-8(SP)
```


**在编写汇编，为寄存器需要加上标记符号,用来好阅读a,+8(FP)**









[参考文章1]: https://segmentfault.com/a/1190000039753236