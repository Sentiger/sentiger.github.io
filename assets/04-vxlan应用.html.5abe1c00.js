import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,e}from"./app.96bd0fa8.js";const l={},i=e(`<p>vxlan\u901A\u4FE1</p><h2 id="vxlan\u70B9\u5BF9\u70B9\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#vxlan\u70B9\u5BF9\u70B9\u901A\u4FE1" aria-hidden="true">#</a> vxlan\u70B9\u5BF9\u70B9\u901A\u4FE1</h2><p><strong>web1 \u6DFB\u52A0veth</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u521B\u5EFAvtep\u8BBE\u5907\uFF0C\u5BF9\u7AEF\u6307\u5411web2\uFF0C\u6307\u5B9Avin\u548Cuderlay\u7F51\u7EDC\u4F7F\u7528\u7684\u7F51\u5361</span>
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token function">add</span> vxlan20 <span class="token builtin class-name">type</span> vxlan <span class="token function">id</span> <span class="token number">20</span> remote <span class="token number">172.31</span>.0.2 dstport <span class="token number">4789</span> dev eth0
<span class="token comment"># \u67E5\u770B\u521B\u5EFA\u7684\u8BBE\u5907</span>
$ <span class="token function">ip</span> -d <span class="token function">link</span> show vxlan20
<span class="token comment"># \u542F\u52A8vxlan</span>
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> vxlan20 up
<span class="token comment"># \u8BBE\u7F6EIP</span>
$ <span class="token function">ip</span> addr <span class="token function">add</span> <span class="token number">11.0</span>.136.11/24 dev vxlan20

<span class="token comment"># \u67E5\u770B\u6DFB\u52A0\u7684\u8DEF\u7531\u7ED3\u679C\uFF0C\u9ED8\u8BA4\u6DFB\u52A0\u4E86\u4E00\u6761\u8DEF\u7531</span>
$ route -n
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
<span class="token number">0.0</span>.0.0         <span class="token number">172.31</span>.0.1      <span class="token number">0.0</span>.0.0         UG    <span class="token number">100</span>    <span class="token number">0</span>        <span class="token number">0</span> eth0
<span class="token number">11.0</span>.136.0      <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.255.0   U     <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> vxlan20
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>web2 \u6DFB\u52A0veth</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u521B\u5EFAvtep\u8BBE\u5907\uFF0C\u5BF9\u7AEF\u6307\u5411web2\uFF0C\u6307\u5B9Avin\u548Cuderlay\u7F51\u7EDC\u4F7F\u7528\u7684\u7F51\u5361</span>
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token function">add</span> vxlan20 <span class="token builtin class-name">type</span> vxlan <span class="token function">id</span> <span class="token number">20</span> remote <span class="token number">172.31</span>.0.3 dstport <span class="token number">4789</span> dev eth0
<span class="token comment"># \u67E5\u770B\u521B\u5EFA\u7684\u8BBE\u5907</span>
$ <span class="token function">ip</span> -d <span class="token function">link</span> show vxlan20
<span class="token comment"># \u542F\u52A8vxlan</span>
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> vxlan20 up
<span class="token comment"># \u8BBE\u7F6EIP</span>
$ <span class="token function">ip</span> addr <span class="token function">add</span> <span class="token number">11.0</span>.136.12/24 dev vxlan20

<span class="token comment"># \u67E5\u770B\u6DFB\u52A0\u7684\u8DEF\u7531\u7ED3\u679C\uFF0C\u9ED8\u8BA4\u6DFB\u52A0\u4E86\u4E00\u6761\u8DEF\u7531</span>
$ route -n
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
<span class="token number">0.0</span>.0.0         <span class="token number">172.31</span>.0.1      <span class="token number">0.0</span>.0.0         UG    <span class="token number">100</span>    <span class="token number">0</span>        <span class="token number">0</span> eth0
<span class="token number">11.0</span>.136.0      <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.255.0   U     <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> vxlan20
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6D4B\u8BD5</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ping</span> <span class="token number">11.0</span>.136.12
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u5E7F\u64AD" tabindex="-1"><a class="header-anchor" href="#\u5E7F\u64AD" aria-hidden="true">#</a> \u5E7F\u64AD</h2><p><strong>web1\u6DFB\u52A0</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token function">add</span> vxlan22 <span class="token builtin class-name">type</span> vxlan <span class="token function">id</span> <span class="token number">22</span> dstport <span class="token number">4790</span> group <span class="token number">229.1</span>.1.2 dev eth0
$ <span class="token function">ip</span> addr <span class="token function">add</span> <span class="token number">11.0</span>.135.11/24 dev vxlan22
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> dev vxlan22 up
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>web2\u6DFB\u52A0</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token function">add</span> vxlan22 <span class="token builtin class-name">type</span> vxlan <span class="token function">id</span> <span class="token number">22</span> dstport <span class="token number">4790</span> group <span class="token number">229.1</span>.1.2 dev eth0
$ <span class="token function">ip</span> addr <span class="token function">add</span> <span class="token number">11.0</span>.135.12/24 dev vxlan22
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> dev vxlan22 up
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5220\u9664\u8BBE\u5907</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> vxlan22 down
$ <span class="token function">ip</span> <span class="token function">link</span> del vxlan22
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6D4B\u8BD5</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ping</span> <span class="token number">11.0</span>.135.12
$ <span class="token function">ping</span> <span class="token number">11.0</span>.135.11
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vxlan-\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#vxlan-\u5BB9\u5668" aria-hidden="true">#</a> vxlan+\u5BB9\u5668</h2><p><strong>web1\u521B\u5EFAdocker\u5BB9\u5668\u5E76\u6307\u5B9A\u7F51\u6865</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u521B\u5EFA\u7F51\u6865\u6307\u5B9A\u7F51\u6BB5</span>
$ <span class="token function">docker</span> network create mynet --subnet <span class="token number">11.0</span>.137.0/24
<span class="token comment"># \u67E5\u770B\u7F51\u6865(\u7F51\u6865\u540D:br-56011e09bd8a)</span>
$ brctl show
<span class="token comment"># \u521B\u5EFAngx\u5BB9\u5668\uFF0C\u5E76\u6307\u5B9A\u7F51\u6865\u7F51\u6BB5</span>
$ <span class="token function">docker</span> run --name ngx1 --rm -d --network mynet --ip <span class="token number">11.0</span>.137.10 nginx:1.18-alpine
<span class="token comment"># \u521B\u5EFAvxlan</span>
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token function">add</span> vxlan23 <span class="token builtin class-name">type</span> vxlan <span class="token function">id</span> <span class="token number">23</span> dstport <span class="token number">4791</span> group <span class="token number">229.1</span>.1.3 dev eth0
<span class="token comment"># \u542F\u52A8vxlan</span>
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> vxlan23 up
<span class="token comment"># \u5C06vxlan\u7ED1\u5B9A\u5230\u7F51\u6865</span>
$ brctl addif br-56011e09bd8a vxlan23
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>web2\u521B\u5EFAdocker\u5BB9\u5668\u5E76\u6307\u5B9A\u7F51\u6865</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u521B\u5EFA\u7F51\u6865\u6307\u5B9A\u7F51\u6BB5</span>
$ <span class="token function">docker</span> network create mynet --subnet <span class="token number">11.0</span>.137.0/24
<span class="token comment"># \u67E5\u770B\u7F51\u6865(\u7F51\u6865\u540D:br-ccc48adc6068)</span>
$ brctl show
<span class="token comment"># \u521B\u5EFAngx\u5BB9\u5668\uFF0C\u5E76\u6307\u5B9A\u7F51\u6865\u7F51\u6BB5</span>
$ <span class="token function">docker</span> run --name ngx2 --rm -d --network mynet --ip <span class="token number">11.0</span>.137.11 nginx:1.18-alpine
<span class="token comment"># \u521B\u5EFAvxlan</span>
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token function">add</span> vxlan23 <span class="token builtin class-name">type</span> vxlan <span class="token function">id</span> <span class="token number">23</span> dstport <span class="token number">4791</span> group <span class="token number">229.1</span>.1.3 dev eth0
<span class="token comment"># \u542F\u52A8vxlan</span>
$ <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> vxlan23 up
<span class="token comment"># \u5C06vxlan\u7ED1\u5B9A\u5230\u7F51\u6865</span>
$ brctl addif br-ccc48adc6068 vxlan23
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h2>`,23),c=[i];function p(t,o){return s(),a("div",null,c)}var u=n(l,[["render",p],["__file","04-vxlan\u5E94\u7528.html.vue"]]);export{u as default};
